# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### üìç –ì–¥–µ –∂–∏–≤–µ—Ç ID –∞–¥–º–∏–Ω–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** `APP_ADMIN_USER_IDS` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** `ADMIN_USER_IDS` (legacy –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

**–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:**
- `app/settings.py` - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `_admin_ids_set: set[int]` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- `settings.is_admin(user_id)` - –º–µ—Ç–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

## üõ†Ô∏è –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env
cp config.env.example .env
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π Telegram ID

**–°–ø–æ—Å–æ–± 1 - –ß–µ—Ä–µ–∑ –±–æ—Ç–∞:**
1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/start`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f logs/bot.log`
3. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å –≤–∞—à–∏–º ID

**–°–ø–æ—Å–æ–± 2 - –ß–µ—Ä–µ–∑ @userinfobot:**
1. –ù–∞–ø–∏—à–∏—Ç–µ @userinfobot –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π —á–∏—Å–ª–æ–≤–æ–π ID

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª

```bash
# .env
APP_ADMIN_USER_IDS=50929545,123456,789012
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–∏—Å–ª–æ–≤—ã–µ ID, –Ω–µ @username
- ‚úÖ –†–∞–∑–¥–µ–ª—è–π—Ç–µ –∑–∞–ø—è—Ç—ã–º–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
- ‚úÖ –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–≤

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
./stop_bot.sh
./start_bot.sh
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ö–æ–º–∞–Ω–¥–∞ /admin_config

–î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/admin_config`:

```
üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤

üë§ –í–∞—à ID: 50929545
üë• –ê–¥–º–∏–Ω—ã: [50929545, 123456]
üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2
üìç –ò—Å—Ç–æ—á–Ω–∏–∫: APP_ADMIN_USER_IDS=50929545,123456
üìÅ .env —Ñ–∞–π–ª: ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç

üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å APP_ADMIN_USER_IDS=your_telegram_id
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
tail -f logs/bot.log | grep -i admin
```

–î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∞:
```
INFO - Admin IDs loaded from APP_ADMIN_USER_IDS=50929545: [50929545]
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - `_admin_ids_set` –ø—É—Å—Ç–æ–π
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ @username –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–æ–≤–æ–≥–æ ID
3. **–û–ø–µ—á–∞—Ç–∫–∞ –≤ .env** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/admin_config`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à ID –≤ —Å–ø–∏—Å–∫–µ –∞–¥–º–∏–Ω–æ–≤
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $APP_ADMIN_USER_IDS

# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env
cat .env | grep ADMIN

# –õ–æ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏
tail logs/bot.log | grep -i admin
```

### –ü—Ä–æ–±–ª–µ–º–∞: .env —Ñ–∞–π–ª –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è

**–£–±–µ–¥–∏—Ç–µ—Å—å:**
- –§–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ `.env` (—Å —Ç–æ—á–∫–æ–π)
- –§–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö
- –§–æ—Ä–º–∞—Ç: `–ü–ï–†–ï–ú–ï–ù–ù–ê–Ø=–∑–Ω–∞—á–µ–Ω–∏–µ` (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ =)

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤** - –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
4. **–ó–∞—â–∏—Ç–∞ .env** - –¥–æ–±–∞–≤—å—Ç–µ .env –≤ .gitignore

### ‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env** –≤ git
2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ @username** - —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ ID
3. **–ù–µ –¥–∞–≤–∞–π—Ç–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –≤—Å–µ–º** –ø–æ–¥—Ä—è–¥
4. **–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å** –±–æ—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥

```python
@router.message(F.text == "/new_admin_command")
async def new_admin_command_handler(message: Message) -> None:
    if not _is_admin(message):
        await message.answer("‚ùå –ö–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º")
        return
    
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤

```python
from app.settings import settings

user_id = 50929545
if settings.is_admin(user_id):
    print("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º")
else:
    print("–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```python
from app.settings import get_admin_config_info

config = get_admin_config_info()
print(f"–ê–¥–º–∏–Ω—ã: {config['admin_ids']}")
print(f"–ò—Å—Ç–æ—á–Ω–∏–∫: {config['source']}")
```

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞](admin_access_control.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [–°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è](tagging_system.md) - –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](logging_system.md) - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
